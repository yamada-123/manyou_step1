<% if current_user.try(:admin?) %>
<h1>ユーザー一覧</h1>
<table>
  <tr>
    <th>ユーザーID</th>
    <th>名前</th>
    <th>メールアドレス</th>
    <th>タスク数</th>
    <th>管理者?</th>
  </tr>

  <% @users.each do |user| %>
  <tr class = 'user_row'>
    <td><%= user.id %></td>
    <td><%= user.name %></td>
    <td><%= user.email %></td>
    <td><%= user.tasks.count %></td>
    <td><%= user.admin %></td>

    <td><%= link_to '詳細を確認する', admin_user_path(user.id), id: "user-show-#{user.id}" %></td>
    <td><%= link_to 'ユーザーを編集する',edit_admin_user_path(user.id) %></td>
    <td><%= link_to 'ユーザー情報を削除',admin_user_path(user.id),method: :delete %></td>
  </tr>
  <% end %>
</table>
<% else %>
<h1>管理者以外は見れないエラーページです</h1>
<% end %>